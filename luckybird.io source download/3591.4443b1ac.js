"use strict";(self["webpackChunkluckybird"]=self["webpackChunkluckybird"]||[]).push([[3591],{365972:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var o=function(){var t=this,e=t._self._c;return e("section",{directives:[{name:"show",rawName:"v-show",value:t.visible&&!t.login,expression:"visible && !login"}],staticClass:"loginTwoFactor_page commonAlert_page"},[e("div",{staticClass:"loginTwoFactor_wrap commonAlert_wrap"},[e("h2",{staticClass:"loginTwoFactor_title"},[t._v(" "+t._s("2fa"==t.loginData.type?t.$t("loginTwoFactor.title"):"Please check your Email for a login code.")+" ")]),"2fa"==t.loginData.type?e("div",[e("p",{staticClass:"input_title tw-text-blue-200"},[t._v(t._s(t.$t("loginTwoFactor.enterFa")))]),e("div",{staticClass:"loginTwoFactor_input"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.secret_code,expression:"secret_code",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"2fa must be at least 6 characters"},domProps:{value:t.secret_code},on:{keydown:function(t){t.stopPropagation()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendVerification.apply(null,arguments)},input:function(e){e.target.composing||(t.secret_code=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),e("el-button",{staticClass:"loginTwoFactor_button",attrs:{type:"primary"},on:{click:t.sendVerification}},[t._v(t._s(t.$t("loginTwoFactor.submitLogin")))]),e("span",{staticClass:"loginTwoFactor_forget",on:{click:t.forgetTfaEvent}},[t._v(t._s(t.$t("common.forgetFa")))])],1):t._e(),"code"==t.loginData.type?e("div",[e("p",{staticClass:"input_title"},[t._v("Email Code")]),e("div",{staticClass:"loginTwoFactor_input"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.secret_code,expression:"secret_code",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:t.secret_code},on:{keydown:function(t){t.stopPropagation()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendVerification.apply(null,arguments)},input:function(e){e.target.composing||(t.secret_code=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),e("el-button",{staticClass:"loginTwoFactor_button",attrs:{type:"primary"},on:{click:t.sendVerification}},[t._v(t._s(t.$t("loginTwoFactor.submitLogin")))]),e("span",{staticClass:"loginTwoFactor_forget",on:{click:t.supportEvent}},[t._v(t._s(t.$t("account.liveSupport"))+"?")])],1):t._e()]),e("el-dialog",{staticClass:"[&_.el-dialog]:!tw-w-[500px]",attrs:{title:"Hint",visible:t.dialogVisible,"append-to-body":!0,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-position":"top","hide-required-asterisk":!1}},[e("el-form-item",{staticClass:"[&_label]:tw-text-blue-250",attrs:{label:"Date of Birth",prop:"date",required:""}},[e("el-date-picker",{staticClass:"tw-w-full",attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"please select date of birth"},model:{value:t.ruleForm.date,callback:function(e){t.$set(t.ruleForm,"date",e)},expression:"ruleForm.date"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("setting.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v(t._s(t.$t("setting.confirm")))])],1)],1)],1)},s=[],a=i(695353),n=i(209306),l=i(416884),r={name:"loginTwoFactor",mixins:[n.GU],props:{visible:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:!1},loginData:{type:Object,default:function(){return{}}}},data(){let t=(t,e,i)=>{(0,l.Ju)(e)?i():i(new Error("must be at least 18 years old"))};return{secret_code:"",dialogVisible:!1,ruleForm:{date:""},rules:{date:[{required:!0,message:"This field is required",trigger:"change"},{validator:t,trigger:"change"}]}}},watch:{visible(t){t?(this.$emit("open"),this.initData()):(this.$emit("close"),this.clearData())}},computed:{...(0,a.aH)(["login","fingerprint"])},methods:{submitForm(t){this.$refs[t].validate((t=>{if(!t)return!1;this.network.send(3079,{token:this.loginData&&this.loginData.token?this.loginData.token:this.userInfo.token,domain:location.host,birthday:this.ruleForm.date})}))},handleClose(){this.dialogVisible=!1},forgetTfaEvent(){1===this.loginData.status?this.$confirm(this.$t("setting.hintDetail1"),this.$t("setting.hint"),{confirmButtonText:this.$t("setting.confirm"),cancelButtonText:this.$t("setting.cancel"),cancelButtonClass:"el-button--primary"}).then((()=>{this.network.send(3079,{token:this.loginData&&this.loginData.token?this.loginData.token:this.userInfo.token,domain:location.host})})).catch((()=>{})):2===this.loginData.status?this.dialogVisible=!0:3===this.loginData.status&&this.$confirm("Please contact live support",this.$t("setting.hint"),{confirmButtonText:this.$t("setting.confirm"),cancelButtonText:this.$t("setting.cancel"),cancelButtonClass:"el-button--primary"}).then((()=>{this.openIntercom()})).catch((()=>{}))},close(){document.body.classList.remove("body_hidden"),this.$emit("update:visible",!1),this.$emit("close")},initData(){this.appendToBody&&(document.body.appendChild(this.$el),document.body.classList.add("body_hidden"))},clearData(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),document.body.classList.remove("body_hidden"),this.secret_code=""},sendVerification(){this.secret_code&&this.network.send(3068,{secret_code:this.secret_code,is_login:!0,token:this.loginData.token,device:this.comDevice,fingerprint:this.fingerprint,type:this.loginData.type})}},mounted(){},beforeDestroy(){}},c=r,d=i(281656),u=(0,d.A)(c,o,s,!1,null,null,null),p=u.exports}}]);